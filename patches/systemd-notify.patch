Author: aszlig <aszlig@nix.build>
Date:   Thu May 3 06:29:02 2018 +0200

    Add support for systemd startup notification
    
    This is useful if we specifically want to wait for the habitica service
    during tests but might be useful for other things as well.
    
    Signed-off-by: aszlig <aszlig@nix.build>
    Filename: systemd-notify.patch

diff --git a/package.json b/package.json
index d0eb1b344..1e94c7c3e 100644
--- a/package.json
+++ b/package.json
@@ -69,6 +69,7 @@
     "pug": "^2.0.3",
     "rimraf": "^2.4.3",
     "sass-loader": "^7.0.0",
+    "sd-notify": "^2.3.0",
     "shelljs": "^0.8.1",
     "superagent": "^3.8.3",
     "svg-inline-loader": "^0.8.0",
diff --git a/website/server/server.js b/website/server/server.js
index ddb326905..e082fb869 100644
--- a/website/server/server.js
+++ b/website/server/server.js
@@ -3,6 +3,7 @@ import logger from './libs/logger';
 import express from 'express';
 import http from 'http';
 import systemdSocket from 'systemd-socket';
+import notify from 'sd-notify';
 
 try {
   // @TODO: May need to remove - testing
@@ -40,6 +41,7 @@ attachMiddlewares(app, server);
 server.on('request', app);
 server.listen(systemdSocket() || app.get('port'), () => {
   logger.info(`Express server listening on port ${app.get('port')}`);
+  notify.ready();
 });
 
 module.exports = server;
