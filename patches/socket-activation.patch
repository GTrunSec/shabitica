Author: aszlig <aszlig@nix.build>
Date:   Tue Mar 27 05:37:06 2018 +0200

    Support for systemd socket activation
    
    This adds another dependency to make support for socket activation very
    trivial.
    
    Signed-off-by: aszlig <aszlig@nix.build>
    Filename: socket-activation.patch

diff --git a/package.json b/package.json
index 90827b31a..37ca2e87f 100644
--- a/package.json
+++ b/package.json
@@ -76,6 +76,7 @@
     "svg-url-loader": "^2.3.2",
     "svgo": "^1.0.5",
     "svgo-loader": "^2.1.0",
+    "systemd-socket": "^0.0.0",
     "url-loader": "^1.0.0",
     "useragent": "^2.1.9",
     "uuid": "^3.0.1",
diff --git a/website/server/server.js b/website/server/server.js
index 5dee447b9..36382f0fe 100644
--- a/website/server/server.js
+++ b/website/server/server.js
@@ -2,6 +2,7 @@ import nconf from 'nconf';
 import logger from './libs/logger';
 import express from 'express';
 import http from 'http';
+import systemdSocket from 'systemd-socket';
 
 // @TODO: May need to remove - testing
 import memwatch from 'memwatch-next';
@@ -34,7 +35,7 @@ import './models/user';
 attachMiddlewares(app, server);
 
 server.on('request', app);
-server.listen(app.get('port'), () => {
+server.listen(systemdSocket() || app.get('port'), () => {
   logger.info(`Express server listening on port ${app.get('port')}`);
 });
 
